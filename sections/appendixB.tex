\section{Appendix B}\label{app:B}
\begin{lstlisting}[language=Python, xleftmargin=0.5cm]
	func StartGame():
	loadGameConfiguration();
	generateWorlds();
	
	while(!gameFinished)
	dayPhase()
	nightPhase()
	checkFinnished()
	
	func dayPhase():
	foreach (Player in game.Players)
	communicate()
	votes += voting()
	
	killMostVoted(votes)
	
	func communicate():
	world = getMostPlausibleWorld()
	action = self.getAction(world)
	
	if (action is inqure or accuse)
	player = getHighestInformationGainPlayer()
	question = getHighestInformationQuestion(player)
	communicativeAction = self.ask(player, question)
	
	else if (action is defend)
	communicativeAction = self.claimRole()
	
	updatePossibleWorlds(communicativeAction)
	
	func updatePossibleWorlds(information):
	foreach (player in game.Players)
	foreach (possibleWorld in player.possibleWorlds)
	possibleWorld.UpdateMarks(information)
	
	func voting():
	world = getMostPlausibleWorld()
	suspiciousPlayer = getPossibleMafiaPlayer(world)
	return suspiciousPlayer
	
	func nightPhase():
	handleActionSequence()
	
	func handleActionSequence():
	precedenceList = sortByActionPrecedence(game.Players)
	
	foreach (player in precedenceList)
	player.performNightAction(action)
	
	foreach (player in game.Players)
	player.updatePossibleWorlds(player.actionResult)
	
	
	func performNightAction():
	// We choose Sheriff as an example
	if (self.role == Sheriff)
	world = getMostPlausibleWorld()
	
	suspiciousPlayers = getSortedPossibleMafiaPlayers(world)
	suspiciousPlayers.remove(self.previousTargets)
	
	self.actionResult = interrogate(suspiciousPlayer[0])
\end{lstlisting}